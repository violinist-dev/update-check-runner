language: php
dist: xenial
php:
- '7.0'
- '7.1'
- '7.2'
- '7.3'
- '7.4'
env:
  - COMPOSER_VERSION=1
  - COMPOSER_VERSION=2
services:
- docker
script:
- export MY_COMMIT=$(git log --format=format:%H -n1)
- composer install
- if [ $(phpenv version-name) = "7.0" ]; then docker build -t update-check-runner . -f Dockerfile-70-composer-${COMPOSER_VERSION}; fi
- if [ $(phpenv version-name) = "7.0" ]; then docker build -t update-check-runner . -f Dockerfile-71-composer-${COMPOSER_VERSION}; fi
- if [ $(phpenv version-name) = "7.0" ]; then docker build -t update-check-runner . -f Dockerfile-72-composer-${COMPOSER_VERSION}; fi
- if [ $(phpenv version-name) = "7.0" ]; then docker build -t update-check-runner . -f Dockerfile-73-composer-${COMPOSER_VERSION}; fi
- if [ $(phpenv version-name) = "7.0" ]; then docker build -t update-check-runner . -f Dockerfile-74-composer-${COMPOSER_VERSION}; fi
- "./vendor/bin/phpunit"
